/*
BttrLazyLoading, Responsive Lazy Loading plugin for JQuery
by Julien Renaux http://julienrenaux.fr/

Version 1.0.0-alpha.1
Full source at https://github.com/shprink/BttrLazyLoading

MIT License, https://github.com/shprink/BttrLazyLoading/blob/master/LICENSE
*/
!function(){"use strict";var t,i,o;t=jQuery,i=function(){function i(i,o){var e,r,s=this;null==o&&(o={}),this.$img=t(i),this.loaded=!1,this.loading=!1,e=t.extend(!0,{},t.bttrlazyloading.constructor.options),this.options=t.extend(e,o),this.ranges=t.bttrlazyloading.constructor.ranges,this.container=t(this.options.container),"number"==typeof window.devicePixelRatio&&(this.constructor.dpr=window.devicePixelRatio),this.whiteList=["lg","md","sm","xs"],this.blackList=[],A.call(this),r=n.call(this),this.$img.css({width:r.width,height:r.height,"background-color":this.options.backgroundcolor?this.options.backgroundcolor:void 0}),h.call(this),setTimeout(function(){return g.call(s)},100)}var o,n,e,r,s,a,l,A,h,g;return i.dpr=1,A=function(){var i=this;return t.each(this.$img.data(),function(o,n){if(n)if(0!==o.indexOf("bttrlazyloading"),o=o.replace("bttrlazyloading","").replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase().split("-"),o.length>1){if("undefined"!=typeof i.options.img[o[0]][o[1]])return i.options.img[o[0]][o[1]]=n}else{if(t.inArray(o[0],i.whiteList)>-1&&"object"==typeof n)return t.extend(i.options.img[o[0]],n);if("undefined"!=typeof i.options[o[0]])return i.options[o[0]]=n}})},h=function(){var i=this;return this.$img.on("load",function(){return i.$img.addClass("bttrlazyloading-loaded"),i.options.animation&&i.$img.addClass("animated "+i.options.animation),i.loaded=i.$img.attr("src"),i.$img.trigger("bttrlazyloading.afterLoad"),"function"==typeof i.options.onAfterLoad?i.options.onAfterLoad(i.$img,i):void 0}),this.$img.on("bttrlazyloading.load",function(){var t;return i.loading?void 0:(i.loading=!0,t=n.call(i),i.loaded?(i.$img.removeClass("bttrlazyloading-loaded"),i.options.animation&&i.$img.removeClass("animated "+i.options.animation),i.$img.removeAttr("src"),i.$img.css({width:t.width,height:t.height})):i.$img.css({"background-image":"url('"+i.options.placeholder+"')","background-repeat":"no-repeat","background-position":"center",width:t.width,height:t.height}),setTimeout(function(){return i.$img.trigger("bttrlazyloading.beforeLoad"),"function"==typeof i.options.onBeforeLoad&&i.options.onBeforeLoad(i.$img,i),i.$img.data("bttrlazyloading.range",t.range),i.$img.attr("src",o.call(i,t.src,t.range)),i.$img.css({width:"",height:""}),i.loading=!1},i.options.delay))}),this.$img.on("error",function(){var t,o;if(console.log(i.whiteList.length),o=i.$img.attr("src"),t=i.$img.data("bttrlazyloading.range"),console.log(t),i.constructor.dpr>1&&i.options.retina&&o.match(/@2x/gi))console.log("hihih"),i.blackList.push(t+"@2x");else if(i.blackList.push(t),i.whiteList.splice(i.whiteList.indexOf(t),1),0===i.whiteList.length)return"function"==typeof i.options.onError&&i.options.onError(i.$img,i),!1;return console.log(i.whiteList,"whiteList"),console.log(i.blackList,"blackList"),i.$img.trigger("bttrlazyloading.load")}),this.container.on(this.options.event,function(){return console.log("custom event"),g.call(i)}),t(window).on("resize",function(){return g.call(i)})},s=function(){var t;return t=window.innerWidth,t<=this.ranges.xs?"xs":this.ranges.sm<=t&&t<this.ranges.md?"sm":this.ranges.md<=t&&t<this.ranges.lg?"md":this.ranges.lg<=t?"lg":void 0},n=function(){return this.range=s.call(this),r.call(this)},o=function(t,i){return this.constructor.dpr>1&&this.options.retina&&-1===this.blackList.indexOf(i+"@2x")?t.replace(/\.\w+$/,function(t){return"@2x"+t}):t},e=function(t){return"undefined"!=typeof this.options.img[t].src&&null!==this.options.img[t].src?this.options.img[t]:null},r=function(){var t,i,o,n,r,s;if(t=this.whiteList.indexOf(this.range),t>-1&&(o=e.call(this,this.range)))return o.range=this.range,o;for(s=this.whiteList,t=n=0,r=s.length;r>n;t=++n)if(i=s[t],o=e.call(this,i))return o.range=i,o;return""},a=function(){var t,i;return this.$img.is(":hidden")?!1:!this.loaded&&this.options.triggermanually?!1:this.loaded&&this.options.updatemanually?!1:(t=n.call(this),t.src&&this.loaded!==o.call(this,t.src,t.range)?(i=0,this.loaded||(i=this.options.threshold),l.call(this,i)):!1)},l=function(i){var o,n,e;return e=t(window),n={top:e.scrollTop()+i,left:e.scrollLeft()},n.right=n.left+e.width(),n.bottom=n.top+e.height(),o=this.$img.offset(),o.right=o.left+this.$img.outerWidth(),o.bottom=o.top+this.$img.outerHeight(),!(n.right<o.left||n.left>o.right||n.bottom<o.top||n.top>o.bottom)},g=function(){return a.call(this)?this.$img.trigger("bttrlazyloading.load"):void 0},i.prototype.destroy=function(){return this.$img.off("load"),this.$img.off("error"),this.$img.off("bttrlazyloading.load"),this.container.off(this.options.event),this.$img.removeClass("bttrlazyloading-loaded"),this.options.animation&&this.$img.removeClass("animated "+this.options.animation),this.$img.css({width:"",height:"","background-color":"","background-image":"","background-repeat":"","background-position":""}),this.$img.removeData("bttrlazyloading")},i}(),t.fn.extend({bttrlazyloading:function(o){return this.each(function(){var n,e;return n=t(this),"undefined"==typeof n.data("bttrlazyloading")?(e=new i(this,o),n.data("bttrlazyloading",e)):void 0})}}),t.fn.bttrlazyloading.Constructor=i,o=function(){function i(){}return i.prototype.version="1.0.0-alpha.1",i.ranges={xs:767,sm:768,md:992,lg:1200},i.options={img:{xs:{src:null,width:100,height:100},sm:{src:null,width:100,height:100},md:{src:null,width:100,height:100},lg:{src:null,width:100,height:100}},retina:!1,animation:"bounceIn",delay:0,event:"scroll",container:window,threshold:0,triggermanually:!1,updatemanually:!1,backgroundcolor:"#EEE",placeholder:"data:image/gif;base64,R0lGODlhEAALAPQAAP/391tbW+bf3+Da2vHq6l5dXVtbW3h2dq6qqpiVldLMzHBvb4qHh7Ovr5uYmNTOznNxcV1cXI2Kiu7n5+Xf3/fw8H58fOjh4fbv78/JycG8vNzW1vPs7AAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCwAAACwAAAAAEAALAAAFLSAgjmRpnqSgCuLKAq5AEIM4zDVw03ve27ifDgfkEYe04kDIDC5zrtYKRa2WQgAh+QQJCwAAACwAAAAAEAALAAAFJGBhGAVgnqhpHIeRvsDawqns0qeN5+y967tYLyicBYE7EYkYAgAh+QQJCwAAACwAAAAAEAALAAAFNiAgjothLOOIJAkiGgxjpGKiKMkbz7SN6zIawJcDwIK9W/HISxGBzdHTuBNOmcJVCyoUlk7CEAAh+QQJCwAAACwAAAAAEAALAAAFNSAgjqQIRRFUAo3jNGIkSdHqPI8Tz3V55zuaDacDyIQ+YrBH+hWPzJFzOQQaeavWi7oqnVIhACH5BAkLAAAALAAAAAAQAAsAAAUyICCOZGme1rJY5kRRk7hI0mJSVUXJtF3iOl7tltsBZsNfUegjAY3I5sgFY55KqdX1GgIAIfkECQsAAAAsAAAAABAACwAABTcgII5kaZ4kcV2EqLJipmnZhWGXaOOitm2aXQ4g7P2Ct2ER4AMul00kj5g0Al8tADY2y6C+4FIIACH5BAkLAAAALAAAAAAQAAsAAAUvICCOZGme5ERRk6iy7qpyHCVStA3gNa/7txxwlwv2isSacYUc+l4tADQGQ1mvpBAAIfkECQsAAAAsAAAAABAACwAABS8gII5kaZ7kRFGTqLLuqnIcJVK0DeA1r/u3HHCXC/aKxJpxhRz6Xi0ANAZDWa+kEAA7AAAAAAAAAAAA",onBeforeLoad:null,onAfterLoad:null,onError:null},i.prototype.setOptions=function(i){return null==i&&(i={}),t.extend(!0,this.constructor.options,i),this},i.prototype.setRanges=function(i){return null==i&&(i={}),t.extend(!0,this.constructor.ranges,i),this},i}(),t.bttrlazyloading=new o}.call(this);