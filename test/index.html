<!DOCTYPE html>
<html>
	<head>
		<title></title>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<link rel="stylesheet" type="text/css" href="../bower_components/jasmine/lib/jasmine-core/jasmine.css">
		<script type="text/javascript" src="../bower_components/jasmine/lib/jasmine-core/jasmine.js"></script>
		<script type="text/javascript" src="../bower_components/jasmine/lib/jasmine-core/jasmine-html.js"></script>
		<script type="text/javascript" src="../bower_components/jasmine/lib/jasmine-core/boot.js"></script>
		<script src="../bower_components/jquery/jquery.min.js"></script>
		<script src="../bttrlazyloading.js"></script>
		<!-- SPEC -->
		<script type="text/javascript">
			$(document).ready(function() {
				describe("Jquery Data", function() {
					// LOCAL TESTS
					it("set the right options from element", function() {
						var obj = $("#test").bttrlazyloading().data('bttrlazyloading');
						expect(obj.options.img.xs.src).toEqual("../demo/img/768x200.gif");
						expect(obj.options.img.sm.src).toEqual("../demo/img/345x250.gif");
						expect(obj.options.img.md.src).toEqual("../demo/img/455x350.gif");
						expect(obj.options.img.lg.src).toEqual("../demo/img/360x300.gif");
						expect(obj.options.img.xs.width).toEqual(768);
						expect(obj.options.img.sm.width).toEqual(345);
						expect(obj.options.img.md.width).toEqual(455);
						expect(obj.options.img.lg.width).toEqual(360);
						expect(obj.options.img.xs.height).toEqual(200);
						expect(obj.options.img.sm.height).toEqual(250);
						expect(obj.options.img.md.height).toEqual(350);
						expect(obj.options.img.lg.height).toEqual(300);
						expect(obj.options.retina).toEqual(true);
						expect(obj.options.animation).toEqual('rotatedIn');
						expect(obj.options.delay).toEqual(2000);
						expect(obj.options.event).toEqual("mouseover");
						expect(obj.options.container).toEqual("document.body");
						expect(obj.options.backgroundcolor).toEqual("red");
						expect(obj.options.threshold).toEqual(500);
						expect(obj.options.triggermanually).toEqual(true);
						expect(obj.options.updatemanually).toEqual(true);
						expect(obj.options.placeholder).toEqual("data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==");
					});
					
					it("set the right img parameter from data element object", function() {
						var obj = $("#test5").bttrlazyloading().data('bttrlazyloading');
						expect(obj.options.img.xs.src).toEqual("../demo/img/768x200.gif");
						expect(obj.options.img.sm.src).toEqual("../demo/img/345x250.gif");
						expect(obj.options.img.md.src).toEqual("../demo/img/455x350.gif");
						expect(obj.options.img.lg.src).toEqual("../demo/img/360x300.gif");
						expect(obj.options.img.xs.width).toEqual(768);
						expect(obj.options.img.sm.width).toEqual(345);
						expect(obj.options.img.md.width).toEqual(455);
						expect(obj.options.img.lg.width).toEqual(360);
						expect(obj.options.img.xs.height).toEqual(200);
						expect(obj.options.img.sm.height).toEqual(250);
						expect(obj.options.img.md.height).toEqual(350);
						expect(obj.options.img.lg.height).toEqual(300);
					});
				});
				describe("Jquery Plugin", function() {
					it("set the right options from instanciation", function() {
						var obj4 = $("#test4").bttrlazyloading({
							img: {
								xs: {
									src: "../demo/img/768x200.gif",
									width: 111,
									height: 222
								},
								sm: {
									src: "../demo/img/345x250.gif",
									width: 333,
									height: 444
								},
								md: {
									src: "../demo/img/455x350.gif",
									width: 555,
									height: 666
								},
								lg: {
									src: "../demo/img/360x300.gif",
									width: 777,
									height: 888
								}
							},
							retina: true,
							animation: 'fadeInUp',
							delay: 1000,
							backgroundcolor: 'green',
							event: 'click',
							container: 'document.body',
							threshold: 666,
							placeholder: 'test',
							triggermanually: true,
							updatemanually: true,
							onBeforeLoad: function($img, bttrLazyLoading) {
							},
							onAfterLoad: function($img, bttrLazyLoading) {
							},
							onError: function($img, bttrLazyLoading) {
							}
						}).data('bttrlazyloading');
						expect(obj4.ranges.xs).toEqual(767);
						expect(obj4.ranges.sm).toEqual(768);
						expect(obj4.ranges.md).toEqual(992);
						expect(obj4.ranges.lg).toEqual(1200);
						expect(obj4.options.img.xs.src).toEqual("../demo/img/768x200.gif");
						expect(obj4.options.img.sm.src).toEqual("../demo/img/345x250.gif");
						expect(obj4.options.img.md.src).toEqual("../demo/img/455x350.gif");
						expect(obj4.options.img.lg.src).toEqual("../demo/img/360x300.gif");
						expect(obj4.options.img.xs.width).toEqual(111);
						expect(obj4.options.img.sm.width).toEqual(333);
						expect(obj4.options.img.md.width).toEqual(555);
						expect(obj4.options.img.lg.width).toEqual(777);
						expect(obj4.options.img.xs.height).toEqual(222);
						expect(obj4.options.img.sm.height).toEqual(444);
						expect(obj4.options.img.md.height).toEqual(666);
						expect(obj4.options.img.lg.height).toEqual(888);
						expect(obj4.options.backgroundcolor).toEqual("green");
						expect(obj4.options.retina).toEqual(true);
						expect(obj4.options.animation).toEqual('fadeInUp');
						expect(obj4.options.delay).toEqual(1000);
						expect(obj4.options.event).toEqual("click");
						expect(obj4.options.container).toEqual("document.body");
						expect(obj4.options.threshold).toEqual(666);
						expect(obj4.options.placeholder).toEqual("test");
						expect(obj4.options.triggermanually).toEqual(true);
						expect(obj4.options.updatemanually).toEqual(true);
					});

					// GLOBAL TESTS
					it("set the default global options", function() {
						$.bttrlazyloading.setOptions({
							img: {
								xs: {
									src: "../demo/img/768x200.gif",
									width: 111,
									height: 222
								},
								sm: {
									src: "../demo/img/345x250.gif",
									width: 333,
									height: 444
								},
								md: {
									src: "../demo/img/455x350.gif",
									width: 555,
									height: 666
								},
								lg: {
									src: "../demo/img/360x300.gif",
									width: 777,
									height: 888
								}
							},
							retina: true,
							backgroundcolor: 'blue',
							animation: 'fadeInUp',
							delay: 1000,
							event: 'click',
							container: 'document.body',
							threshold: 666,
							placeholder: 'test',
							triggermanually: true,
							updatemanually: true,
							onBeforeLoad: function($img, bttrLazyLoading) {
							},
							onAfterLoad: function($img, bttrLazyLoading) {
							},
							onError: function($img, bttrLazyLoading) {
							}
						});

						var obj2 = $("#test2").bttrlazyloading().data('bttrlazyloading');
						expect(obj2.ranges.xs).toEqual(767);
						expect(obj2.ranges.sm).toEqual(768);
						expect(obj2.ranges.md).toEqual(992);
						expect(obj2.ranges.lg).toEqual(1200);
						expect(obj2.options.img.xs.src).toEqual("../demo/img/768x200.gif");
						expect(obj2.options.img.sm.src).toEqual("../demo/img/345x250.gif");
						expect(obj2.options.img.md.src).toEqual("../demo/img/455x350.gif");
						expect(obj2.options.img.lg.src).toEqual("../demo/img/360x300.gif");
						expect(obj2.options.img.xs.width).toEqual(111);
						expect(obj2.options.img.sm.width).toEqual(333);
						expect(obj2.options.img.md.width).toEqual(555);
						expect(obj2.options.img.lg.width).toEqual(777);
						expect(obj2.options.img.xs.height).toEqual(222);
						expect(obj2.options.img.sm.height).toEqual(444);
						expect(obj2.options.img.md.height).toEqual(666);
						expect(obj2.options.img.lg.height).toEqual(888);
						expect(obj2.options.backgroundcolor).toEqual("blue");
						expect(obj2.options.retina).toEqual(true);
						expect(obj2.options.animation).toEqual('fadeInUp');
						expect(obj2.options.delay).toEqual(1000);
						expect(obj2.options.event).toEqual("click");
						expect(obj2.options.container).toEqual("document.body");
						expect(obj2.options.threshold).toEqual(666);
						expect(obj2.options.placeholder).toEqual("test");
						expect(obj2.options.triggermanually).toEqual(true);
						expect(obj2.options.updatemanually).toEqual(true);
					});

					it("set the default global ranges", function() {
						$.bttrlazyloading.setRanges({
							'xs': 5,
							'sm': 6,
							'md': 7,
							'lg': 8
						});
						var obj3 = $("#test3").bttrlazyloading().data('bttrlazyloading');
						expect(obj3.ranges.xs).toEqual(5);
						expect(obj3.ranges.sm).toEqual(6);
						expect(obj3.ranges.md).toEqual(7);
						expect(obj3.ranges.lg).toEqual(8);
					});
				});
			});
		</script>
	</head>
	<body>
		<img id="test"
			 data-bttrlazyloading-xs-src="../demo/img/768x200.gif"
			 data-bttrlazyloading-xs-width="768"
			 data-bttrlazyloading-xs-height="200"
			 data-bttrlazyloading-sm-src="../demo/img/345x250.gif"
			 data-bttrlazyloading-sm-width="345"
			 data-bttrlazyloading-sm-height="250"
			 data-bttrlazyloading-md-src="../demo/img/455x350.gif"
			 data-bttrlazyloading-md-width="455"
			 data-bttrlazyloading-md-height="350"
			 data-bttrlazyloading-lg-src="../demo/img/360x300.gif"
			 data-bttrlazyloading-lg-width="360"
			 data-bttrlazyloading-lg-height="300"
			 data-bttrlazyloading-animation="rotatedIn"
			 data-bttrlazyloading-retina="true"
			 data-bttrlazyloading-delay="2000"
			 data-bttrlazyloading-event="mouseover"
			 data-bttrlazyloading-container="document.body"
			 data-bttrlazyloading-triggermanually="true"
			 data-bttrlazyloading-updatemanually="true"
			 data-bttrlazyloading-threshold="500"
			 data-bttrlazyloading-backgroundcolor="red"
			 data-bttrlazyloading-placeholder="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg=="
			 />

		<img id="test2"/>

		<img id="test3"/>

		<img id="test4"/>

		<img id="test5" 
			 data-bttrlazyloading-xs='{"src": "../demo/img/768x200.gif", "width" : 768,  "height" : 200}'
			 data-bttrlazyloading-sm='{"src": "../demo/img/345x250.gif", "width" : 345,  "height" : 250}'
			 data-bttrlazyloading-md='{"src": "../demo/img/455x350.gif", "width" : 455,  "height" : 350}'
			 data-bttrlazyloading-lg='{"src": "../demo/img/360x300.gif", "width" : 360,  "height" : 300}'
			 />
	</body>
</html>
